<?xml version="1.0" encoding="UTF-8"?>  
    <project name="MyApp" basedir=".." default="compile">  
       
      <property name="conf.dir" location="${basedir}/conf" />  
      <property name="build.dir" location="${basedir}/build"/>  
      <property name="classes.dir" location="${build.dir}/classes" />  
      <property name="compile.src" location="${basedir}/src" />  
      <property name="lib" location="${basedir}/lib" />  
      <property name="wsdl.dir" location="${build.dir}/wsdl" />  
      <property name="wsdd.dir" location="${build.dir}/wsdd" />  
      
        
      <!--  Sets classpath for build  -->  
      <path id="classpath">  
       <pathelement path="${java.class.path}" />  
       <fileset dir="${lib}">  
        <include name="**/*.jar" />  
       </fileset>  
       <pathelement path="${classes.dir}" />  
      </path>  
      
       
       
     <taskdef name="axis-java2wsdl" classname="org.apache.axis.tools.ant.wsdl.Java2WsdlAntTask" >  
             <classpath refid="classpath"/>  
       </taskdef>  
       
     <taskdef name="axis-wsdl2java" classname="org.apache.axis.tools.ant.wsdl.Wsdl2javaAntTask" >  
              <classpath refid="classpath"/>  
     </taskdef>  
       
     <target name="clean-all" description="Cleans(Deletes) the contents of all output directories">  
      <delete dir="${classes.dir}"/>  
      <delete dir="${wsdl.dir}"/>  
      <delete dir="${wsdd.dir}"/>  
     </target>  
       
     <target name="build-all" description="Builds the entire project" depends="clean-all,compile,generateWSDL,generateWSDD,compileStubs,compile-client">  
       
     </target>  
      
     <target name="compile" description="Compiles java source code">  
      <mkdir dir="${classes.dir}"/>  
      <javac destdir="${classes.dir}" classpathref="classpath" fork="true" srcdir="${compile.src}" includes="org/libertya/wse/**/*.java" excludes="org/libertya/wse/client/**/*.java" />  
     </target>  
       
     <target name="compile-client" description="Compiles the webservice client" depends="compile">  
	 <mkdir dir="${classes.dir}"/>
<!-- 	   
     <javac destdir="${classes.dir}" classpathref="classpath" fork="true" srcdir="${compile.src}" includes="org/libertya/wse/client/**/*.java"/>
-->
     </target>  
          
     <target name="generateWSDL" description="Generates wsdl files from the java service interfaces">  
      <mkdir dir="${wsdl.dir}"/>  
      <axis-java2wsdl classpathref="classpath"  
               output="${wsdl.dir}/LibertyaWSE.wsdl"  
               location="http://localhost:8080/axis/services/LibertyaWSE"  
               namespace="org.libertya.wse"  
               classname="org.libertya.wse.LibertyaWSE">  
      </axis-java2wsdl>  
     </target>  
       
     <target name="generateWSDD" description="Generates wsdd files from the wsdl files">  
      <mkdir dir="${wsdd.dir}"/>  
      <axis-wsdl2java  
            output="${wsdd.dir}"  
            deployscope="Application"  
            serverside="true"  
            url="${wsdl.dir}\LibertyaWSE.wsdl">  
      </axis-wsdl2java>  
      
     <replaceregexp file="${wsdd.dir}/wse/libertya/org/deploy.wsdd" match="wse.libertya.org.LibertyaWSESoapBindingImpl" replace="org.libertya.wse.LibertyaWSEImpl" encoding="UTF-8" />
     </target>  
       
     <target name="compileStubs" description="Compiles the java classes(stubs) generated by Axis using the wsdl2java task">  
      <mkdir dir="${classes.dir}"/>  
      <javac destdir="${classes.dir}" classpathref="classpath" fork="true" srcdir="${wsdd.dir}"/>  
     </target>  
       
     <target name="deployWebservice" description="Deploys the webservice onto the server, using the wsdd file and Axis' AdminClient">  
      <java classname="org.apache.axis.client.AdminClient" classpathref="classpath" fork="true">  
       <arg value="${wsdd.dir}/wse/libertya/org/deploy.wsdd"/>  
      </java>  
     </target>  
       
     <target name="undeployWebservice" description="Undeploys webservice using the wsdd file and the Axis' AdminClient">  
      <java classname="org.apache.axis.client.AdminClient" classpathref="classpath" fork="true">  
       <arg value="${wsdd.dir}/wse/libertya/org/undeploy.wsdd"/>  
      </java>  
     </target>  
       
     <target name="runWebserviceClient" description="Executes the java client which access the webservice">  
       <java classname="org.libertya.service.client.ServiceClient" classpathref="classpath" fork="true"/>  
     </target>  
        
    </project>  